// Copyright (c) DGP Studio. All rights reserved.
// Licensed under the MIT license.

using System.IO;

namespace Snap.Hutao.Service.Game;

internal sealed class GameAudioSystem
{
    private readonly string gameDirectory;

    private bool? chinese;
    private bool? english;
    private bool? japanese;
    private bool? korean;

    public GameAudioSystem(string gameFilePath)
    {
        string? directory = Path.GetDirectoryName(gameFilePath);
        ArgumentException.ThrowIfNullOrEmpty(directory);
        gameDirectory = directory;
    }

    public GameAudioSystem(bool chinese, bool english, bool japanese, bool korean)
    {
        gameDirectory = default!;

        this.chinese = chinese;
        this.english = english;
        this.japanese = japanese;
        this.korean = korean;
    }

    public string GameDirectory { get => gameDirectory; }

    public bool Chinese { get => chinese ??= File.Exists(Path.Combine(GameDirectory, GameConstants.AudioChinesePkgVersion)); }

    public bool English { get => english ??= File.Exists(Path.Combine(GameDirectory, GameConstants.AudioEnglishPkgVersion)); }

    public bool Japanese { get => japanese ??= File.Exists(Path.Combine(GameDirectory, GameConstants.AudioJapanesePkgVersion)); }

    public bool Korean { get => korean ??= File.Exists(Path.Combine(GameDirectory, GameConstants.AudioKoreanPkgVersion)); }
}
