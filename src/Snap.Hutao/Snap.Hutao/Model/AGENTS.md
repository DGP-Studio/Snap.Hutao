# Model 层规范

适用于 `Snap.Hutao/Model` 目录。

## 设计原则
- 模型用于描述领域数据、配置或序列化对象。禁止在模型中放入网络请求、数据库查询或 UI 逻辑。
- 按用途划分子命名空间（如 `Metadata`, `Calculable`, `Primitive`）。新增类型需放入最贴近的子文件夹并保持命名空间一致。
- 对需要 JSON/Protobuf 映射的类型，保持属性命名与外部协议一致，并使用 `JsonPropertyName` 或生成器保持兼容。

## 可空与默认值
- 保持 `nullable` 注解准确，所有引用类型属性默认使用 `required` 或在构造函数中初始化，避免运行期 NRE。
- 对于值语义的枚举或结构体，明确默认值含义并在注释中记录。必要时提供静态工厂方法。

## 文档与验证
- 公共类型需包含 XML 注释，说明字段来源与用途。涉及复杂计算的模型需要配套的单元测试或示例。
- 如果模型与数据库迁移相关，更新时同步检查 `Migrations` 目录，保持 EF Core 模型一致。
